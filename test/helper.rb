dir = File.dirname(File.expand_path(__FILE__))
$LOAD_PATH.unshift dir + '/../lib'
require 'test/unit'
require 'rubygems'
require 'pp'

##
# test/spec/mini 3
# http://gist.github.com/25455
# chris@ozmm.org
# file:lib/test/spec/mini.rb
#
def context(*args, &block)
  return super unless (name = args.first) && block
  require 'test/unit'
  klass = Class.new(defined?(ActiveSupport::TestCase) ? ActiveSupport::TestCase : Test::Unit::TestCase) do
    def self.test(name, &block) 
      define_method("test_#{name.gsub(/\W/,'_')}", &block) if block
    end
    def self.xtest(*args) end
    def self.setup(&block) define_method(:setup, &block) end
    def self.teardown(&block) define_method(:teardown, &block) end
  end
  (class << klass; self end).send(:define_method, :name) { name.gsub(/\W/,'_') }
  klass.class_eval &block
end

FAMILY= <<-END
{"focus":{"middle_name":"","display_name":"","last_name":"Elliston","locked":"false","gender":"male","url":"https://qa.geni.com/api/profile-1064","public":"false","birth_location":"","guid":"2","first_name":"Amos","suffix":"","current_residence":"Los Angeles, CA, USA","created_by":"https://qa.geni.com/api/profile-1064","birth_date":"11/8/1978","name":"Amos Elliston","big_tree":"false","id":"profile-1064","claimed":"true"},"nodes":{"union-5271":{"edges":{"profile-1064":{"rel":"child"},"profile-1058":{"rel":"partner"},"profile-13":{"rel":"partner"}},"status":"spouse"},"profile-17":{"edges":{"union-30482":{"rel":"partner"}},"middle_name":"","last_name":"Elliston","gender":"female","url":"https://qa.geni.com/api/profile-17","public":"false","first_name":"Wendy","id":"profile-17"},"profile-1064":{"edges":{"union-5271":{"rel":"child"},"union-30482":{"rel":"partner"}},"middle_name":"","last_name":"Elliston","gender":"male","url":"https://qa.geni.com/api/profile-1064","public":"false","first_name":"Amos","id":"profile-1064"},"profile-333858":{"edges":{"union-30482":{"rel":"child"}},"last_name":"Elliston","gender":"female","url":"https://qa.geni.com/api/profile-333858","public":"false","first_name":"Penelope","id":"profile-333858"},"profile-333847":{"edges":{"union-30482":{"rel":"child"}},"last_name":"Elliston","gender":"female","url":"https://qa.geni.com/api/profile-333847","public":"false","first_name":"Penelope","id":"profile-333847"},"profile-1058":{"edges":{"union-5271":{"rel":"partner"},"union-6780":{"rel":"partner"},"union-36443":{"rel":"child"}},"middle_name":"","last_name":"Elliston","gender":"male","url":"https://qa.geni.com/api/profile-1058","public":"false","first_name":"Mike","id":"profile-1058"},"union-30482":{"edges":{"profile-17":{"rel":"partner"},"profile-1064":{"rel":"partner"},"profile-333858":{"rel":"child"},"profile-333847":{"rel":"child"}},"status":"spouse"},"profile-13":{"edges":{"union-5271":{"rel":"partner"},"union-5272":{"rel":"partner"}},"middle_name":"","last_name":"Elliston","gender":"female","url":"https://qa.geni.com/api/profile-13","public":"false","first_name":"Marg","id":"profile-13"}}}
END

DIVORCED_FAMILY = <<-END
{"focus":{"created_by":"https://stage.geni.com/api/profile-1","locked":"false","suffix":"","gender":"female","claimed":"true","url":"https://stage.geni.com/api/profile-2","first_name":"Marg","middle_name":"","last_name":"Elliston","public":"false","maiden_name":"Sher","big_tree":"true","name":"Marg Elliston","birth_location":"","id":"2","current_residence":"Albuquerque, NM, United States","birth_date":"8/23/1944"},"nodes":{"profile-109":{"edges":{"union-4025682659990010360":{"rel":"partner"},"union-4025682657580010358":{"rel":"partner"},"union-4025682641820010303":{"rel":"child"}},"gender":"female","url":"https://stage.geni.com/api/profile-109","public":"false","last_name":"Daugherty","first_name":"Reta","id":"109"},"union-4025682647920010324":{"edges":{"profile-1":{"rel":"child"},"profile-2":{"rel":"partner"},"profile-3":{"rel":"partner"},"profile-98":{"rel":"child"}},"status":"ex_spouse"},"profile-1":{"edges":{"union-4025682647920010324":{"rel":"child"},"union-4025682643510010314":{"rel":"partner"}},"gender":"male","url":"https://stage.geni.com/api/profile-1","public":"false","last_name":"Elliston","middle_name":"Eagle","first_name":"Amos","id":"1"},"profile-95":{"edges":{"union-4025682701740010359":{"rel":"child"},"union-4025682678190010307":{"rel":"partner"},"union-4025682646650010322":{"rel":"partner"}},"gender":"male","url":"https://stage.geni.com/api/profile-95","public":"false","last_name":"Harris","first_name":"Fred","id":"95"},"profile-100":{"edges":{"union-4025682706690010366":{"rel":"child"},"union-4025682641820010303":{"rel":"partner"}},"gender":"female","url":"https://stage.geni.com/api/profile-100","public":"false","last_name":"Sher","middle_name":"Frankel","first_name":"Hortense ","maiden_name":"Frankel","id":"100"},"profile-2":{"edges":{"union-4025682647920010324":{"rel":"partner"},"union-4025682646650010322":{"rel":"partner"},"union-6000000009825586080":{"rel":"partner"},"union-4025682641820010303":{"rel":"child"}},"gender":"female","url":"https://stage.geni.com/api/profile-2","public":"false","last_name":"Elliston","middle_name":"","first_name":"Marg","maiden_name":"Sher","id":"2"},"profile-3":{"edges":{"union-5244046826250128745":{"rel":"partner"},"union-4025682647920010324":{"rel":"partner"},"union-4025682642320010306":{"rel":"child"}},"gender":"male","url":"https://stage.geni.com/api/profile-3","public":"false","last_name":"Elliston","middle_name":"Shaw","first_name":"Michael","id":"3"},"profile-113":{"edges":{"union-4025682666710010384":{"rel":"partner"},"union-4025682641820010303":{"rel":"child"}},"gender":"female","url":"https://stage.geni.com/api/profile-113","public":"false","last_name":"Hertz","middle_name":"","first_name":"Barbara","id":"113"},"union-4025682646650010322":{"edges":{"profile-95":{"rel":"partner"},"profile-2":{"rel":"partner"}},"status":"spouse"},"profile-98":{"edges":{"union-4025682647920010324":{"rel":"child"},"union-4025682693630010346":{"rel":"partner"}},"gender":"female","url":"https://stage.geni.com/api/profile-98","public":"false","last_name":"Elliston","first_name":"Amanda","id":"98"},"profile-103":{"edges":{"union-4025682648310010327":{"rel":"partner"},"union-4025682641820010303":{"rel":"child"}},"gender":"male","url":"https://stage.geni.com/api/profile-103","public":"false","last_name":"Sher","middle_name":"Michael","first_name":"Andy","id":"103"},"union-6000000009825586080":{"edges":{"profile-2":{"rel":"partner"},"profile-6000000009825586077":{"rel":"partner"}},"status":"spouse"},"profile-99":{"edges":{"union-4025682660670010362":{"rel":"child"},"union-4025682641820010303":{"rel":"partner"}},"gender":"male","url":"https://stage.geni.com/api/profile-99","public":"false","last_name":"Sher","first_name":"Malcolm","id":"99"},"union-4025682641820010303":{"edges":{"profile-109":{"rel":"child"},"profile-100":{"rel":"partner"},"profile-2":{"rel":"child"},"profile-113":{"rel":"child"},"profile-103":{"rel":"child"},"profile-99":{"rel":"partner"}},"status":"spouse"},"profile-6000000009825586077":{"edges":{"union-6000000009825586080":{"rel":"partner"}},"gender":"male","url":"https://stage.geni.com/api/profile-6000000009825586077","public":"false","last_name":"Harris","first_name":"Fred","id":"6000000009825586077"}}}
END
